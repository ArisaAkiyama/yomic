import{r as s,a as R,C as m}from"./index-aTExsNfO.js";function x(){const[f,a]=s.useState({data:null,error:!1,loading:!1,success:!1,errorResponse:null}),e=s.useRef(null),u=s.useCallback(o=>{a(n=>({...n,data:o,loading:!1,success:!0,error:!1,errorResponse:null}))},[]),d=s.useCallback(async({url:o,method:n="GET",apiUrl:g,schema:p,axiosConfig:b})=>{try{e.current&&e.current.abort(),e.current=new AbortController,a(l=>({...l,loading:!0,error:!1,success:!1,errorResponse:null}));const r=g??"https://be.komikcast.fit/",c=await new R(r).getAxios().request({url:o,method:n,...b,signal:e.current.signal}),t=p.safeParse(c.data);if(!t.success){const l=t.error.message;console.error("Data validation error:",t.error),a(E=>({...E,loading:!1,error:!0,success:!1,errorResponse:new Error(`Data validation failed: ${l}`)}));return}u(t.data)}catch(r){if(r instanceof m||r instanceof Error&&r.name==="AbortError")return;const i=r instanceof Error?r.message:"Unknown API error occurred";a(c=>({...c,loading:!1,error:!0,success:!1,errorResponse:new Error(i)}))}},[u]);return s.useEffect(()=>()=>{e.current&&e.current.abort()},[]),{...f,fetchData:d}}export{x as u};
